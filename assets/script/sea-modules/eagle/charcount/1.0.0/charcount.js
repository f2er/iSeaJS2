define("eagle/charcount/1.0.0/charcount",["gallery/jquery/1.8.0/jquery"],function(e,n){var l=e("gallery/jquery/1.8.0/jquery"),a={allowed:140,warning:25,css:{normal:"counter",warning:"warning",exceeded:"exceeded"},tips:{counterElement:"span",normal:"还可以输入{available}字",exceeded:"已经超过{exceeded}字"},label:"",half:!0,capture:!0,initKey:!1,closed:!1,callbacks:{common:function(){},crisis:function(){}}};n.init=function(e,n,r){function t(){var e=d.val();if(!r.half)return d.val(e.substring(0,r.allowed)),void 0;for(var n=0,l="",a=0;e.length>a;a++){var t=e.charCodeAt(a);if(n+=t>=0&&128>=t?.5:1,n>r.allowed)break;l+=e.substr(a,1)}d.val(l)}function c(e){if(0==arguments.length)return null;var n=Array.prototype.slice.call(arguments,1);return e.replace(/\{(\d+)\}/g,function(e,l){return"function"==typeof n[l]?n[l]():n[l]})}function i(e,n,l,a){var t=r.tips[e]?r.tips[e]:r.tips.normal,i=[],o="";i.push("<"),i.push(r.tips.counterElement),i.push(' class="{0}"'),i.push(">"),i.push("{1}"),i.push("</"+r.tips.counterElement+">"),o=i.join(""),t=t.replace(/\{already\}/g,function(){return c(o,function(){return"warning"==e?r.css.normal+" "+r.css.warning:r.css.normal},n)}),t=t.replace(/\{available\}/g,function(){return c(o,function(){return"warning"==e?r.css.normal+" "+r.css.warning:r.css.normal},l)}),t=t.replace(/\{exceeded\}/g,function(){return c(o,function(){return"exceeded"==e?r.css.normal+" "+r.css.exceeded:r.css.normal},a)}),t=t.replace(/\{allowed\}/g,function(){return c(o,r.css.normal,r.allowed)}),f.html(t)}function o(){if(!r.closed){var e=g.getAlready(),n=g.getAvailable(),l=g.getExceeded();u.call(),l>0?(r.capture?(t(),i("warning",e,0,l)):i("exceeded",e,n,l),s.call()):r.warning>=n?i("warning",e,n,l):i("normal",e,n,l)}}var r=l.extend(!0,{},a,r||{}),u=r.callbacks.common,s=r.callbacks.crisis,d=l(e),f=l(n);if(!d.length||!f.length)return null;var g={options:r,getAlready:function(){var e=d.val(),n=0;if(""!=l.trim(r.label)){var a=RegExp("^"+r.label);a.test(e)&&(e=e.replace(a,""))}return n=r.half?e.replace(/[^\x00-\xff]/g,"aa").length/2:e.length,Math.ceil(n)},getAvailable:function(){return r.allowed>this.getAlready()?r.allowed-this.getAlready():0},getExceeded:function(){return this.getAlready()>r.allowed?this.getAlready()-r.allowed:0},calculate:function(){o()},open:function(){r.closed=!1,f.show(),this.calculate()},close:function(){r.closed=!0,f.hide()}};return r.initKey&&o(),""!=l.trim(r.label)&&""==d.val()&&d.val(r.label),d.die(".cc").live("propertychange.cc input.cc keydown.cc keyup.cc change.cc",o),d.die(".cf").live("focus.cf",function(){""!=l.trim(r.label)&&l.trim(r.label)==l.trim(l(this).val())&&l(this).val("")}),d.die(".cb").live("blur.cb",function(){""!=l.trim(r.label)&&""==l(this).val()&&l(this).val(r.label)}),g}});